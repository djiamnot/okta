#+EXPORT_TITLE: "OKTA software documentation"
#+LATEX_CLASS: article
#+LATEX_CLASS_OPTIONS: [letter]
#+LATEX_HEADER: \oddsidemargin 0cm
#+LATEX_HEADER: \evensidemargin 0cm
#+LATEX_HEADER: \textwidth 15.5cm
#+LATEX_HEADER: \topmargin -1cm
#+LATEX_HEADER: \textheight 23cm
#+LATEX_HEADER: \usepackage{fancyhdr}
#+LATEX_HEADER: \pagestyle{fancy}
#+LATEX_HEADER: \fancyhead{}
#+LATEX_HEADER: \fancyhead[LE,RO]{Mois Multi}
#+LATEX_HEADER: \fancyhead[RE,LO]{Totem Contemporain}
#+LATEX_HEADER: \fancyfoot[CE,CO]{Micha≈Ç Seta | 514.575.9243 | mis@artengine.ca}
#+OPTIONS: num:t
#+OPTIONS: toc:t
#+OPTIONS: author:nil
#+OPTIONS: timestamp:t date:t d:nil <:nil p:nil tags:nil
#+LANGUAGE: fr
\thispagestyle{fancy}
#+TITLE: OKTA software documentation
#+AUTHOR: Michal Seta
#+EMAIL: mis@artengine.ca

* Overview

OKTA software is a sound file player with multichannels spacialisation capability built specifically for the Sound Field installation in the June Callwood park in Toronto. The sound engine reacts to the to messages sent from another component that selects the preset scenes based on the cloud formation at various times of the day and according to seasons. The scene presets consist of sound file choices and the sound movement through the space. The sounds are spacialized over 24 speakers distributed around the park.

* Running
** Installation requirements
   - pdextended version 0.42.5 (not tested with any other version)
   - oktadb external (Geoffrey Jones)
     It's actually included in the package in source form
   - rjlib (https://github.com/rjdj/rjlib)
   - xjimmies (http://code.sat.qc.ca/trac/pdsheefa)
   - spinframework (htp://spinframework.com)
   - pyo
   - jack
   - pyospat
     - twisted
     - txosc
* Configuration
** SpinServer
   SpinServer may need some special configuration using a hidden file in user's home directory, located at =~/.spinFramework/args=
** pyospat
   The configuration of pyospat is done via an XML file located in the OKTA directory and command line switches. The XML file can be edited with any text editor and it allows to customise some high-level sound server behaviour, such as sampling rate, audio backend, audio buffer size.
** lanching
   There is a script that takes care of (re)starting all relevant processes, which are:
- spinserver
- pyospat
- pd-extended
- Quick Time Broadcaster
- okta_2015 camera app
The script is called by cron, the process scheduler.
see /crontab -e/ for editing the times the script needs to be run.
* Implementation details
** OKTA behaviors
   This chart (Figue [[fig:Behaviors]]) illustrates the types of movements and beahvaiors:
   #+CAPTION: OKTA behaviors
   #+NAME:   fig:Behaviors
   [[./img/Okta_Behaviors.png]]
